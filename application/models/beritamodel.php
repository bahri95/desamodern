<?php         if (!defined('BASEPATH')) exit('No direct script access allowed');    class Beritamodel extends CI_Model {                function  __construct() {            // Call the Model constructor            parent::__construct();        }               function get_list_kategori_private() {                       $sql = "SELECT * FROM berita_kategori_m             ORDER BY id_kategori ASC";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return 0;            }        }        function get_list_kategori_modul($id_kategori) {                       $sql = "SELECT * FROM berita_kategori_m WHERE id_kategori = ?";            $query = $this->db->query($sql, $id_kategori);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return 0;            }        }               function get_total_berita() {            $id_kategori = $this->uri->segment(4,0);            $sql = "SELECT COUNT(*)'total' FROM berita_m where id_kategori = $id_kategori";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->row_array();                $query->free_result();                return $result["total"];            } else {                return 0;            }        }                function get_list_berita_limit($params) {            $sql = "SELECT a.*, b.id_user, b.admin_name, s.kategori_rubrik FROM berita_m a                     LEFT JOIN  berita_kategori_m s ON a.id_kategori = s.id_kategori                     LEFT JOIN  administrator_m b ON a.user_id_update = b.id_user                     WHERE a.id_kategori = ?                     ORDER BY date_update DESC LIMIT ?, ?";            $query = $this->db->query($sql,$params);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }        function get_list_berita_home($id_kategori) {            $sql = "SELECT a.*, s.id_kategori, s.kategori_rubrik FROM berita_m a                    LEFT JOIN berita_kategori_m s ON a.id_kategori = s.id_kategori                     WHERE s.urutan = ? LIMIT 0,1";            $query = $this->db->query($sql, $id_kategori);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }        function get_list_berita_berjalan() {            $sql = "SELECT * from berita_m where berita_berjalan = 'yes' AND publish = 'yes'";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }        function get_list_berita_terbaru_footer() {            $sql = "SELECT a.*, s.id_kategori, s.kategori_rubrik FROM berita_m a                    LEFT JOIN berita_kategori_m s ON a.id_kategori = s.id_kategori                     LIMIT 0,2";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }        function get_list_berita_sidebar() {            $sql = "SELECT a.*, s.id_kategori, s.kategori_rubrik FROM berita_m a                    LEFT JOIN berita_kategori_m s ON a.id_kategori = s.id_kategori                    LIMIT 0,3";            $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_list_berita_private() {            $sql = "SELECT a.*, s.id_kategori, s.kategori_rubrik FROM berita_m a            LEFT JOIN berita_kategori_m s ON a.id_kategori = s.id_kategori GROUP BY a.id_berita            ORDER BY a.tanggal DESC ";                     $query = $this->db->query($sql);                        if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_list_berita_terkait() {            $id_kategori = $this->uri->segment(4,0);            $sql = "SELECT a.*, b.id_user, b.admin_name, s.kategori_rubrik FROM berita_m a                     LEFT JOIN  berita_kategori_m s ON a.id_kategori = s.id_kategori                     LEFT JOIN  administrator_m b ON a.user_id_update = b.id_user                     WHERE s.id_kategori = $id_kategori ORDER BY date_update DESC LIMIT 0,5";            $query = $this->db->query($sql);                            if ($query->num_rows() > 0) {                $result = $query->result_array();                $query->free_result();                return $result;            } else {                return false;            }        }                function get_berita_by_id($id) {            $sql = "SELECT a.*, b.id_user, b.admin_name, s.kategori_rubrik FROM berita_m a                     LEFT JOIN  berita_kategori_m s ON a.id_kategori = s.id_kategori                     LEFT JOIN  administrator_m b ON a.user_id_update = b.id_user                     WHERE a.id_berita = $id";            $query = $this->db->query($sql, $id);                        if ($query->num_rows() > 0) {                $result = $query->row_array();                $query->free_result();                return $result;            } else {                return false;            }        }                           function process_berita_add($params) {            $sql = "INSERT INTO berita_m (id_kategori, judul, content, tanggal, date_update, keterangan_gambar, berita_berjalan, publish, keywords, user_id_create, user_id_update)                VALUES (?, ?, ?, NOW(), NOW(), ?, ?, ?, ?, ?)";            return $this->db->query($sql, $params);        }                function process_berita_edit($params) {            $sql = "UPDATE berita_m SET id_kategori = ? , judul = ?, content = ?, date_update = NOW(), keterangan_gambar = ?, berita_berjalan = ?, publish = ?, keywords = ?, user_id_update = ?                 WHERE id_berita = ? ";            return $this->db->query($sql, $params);        }                function process_berita_delete($id) {            $this->db->where('id_berita', $id);            return $this->db->delete('berita_m');        }    }