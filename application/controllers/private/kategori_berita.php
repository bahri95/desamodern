<?php    class Kategori_berita extends MY_Controller {                function  __construct() {            // load application base            parent::__construct();            $this->PrivateAppBase();        }        public        function index() {            // template content            $this->smarty->assign("template_content", "private/kategori_berita/list");            // your code here            $this->load->library('pagination');            $this->load->model('kategoriberitamodel');            $this->load->library('notification');            $this->layout->load_javascript("js/admin/plugins/datatables/jquery.dataTables.js");            $this->layout->load_javascript("js/admin/plugins/datatables/dataTables.bootstrap.js");            //$this->smarty->assign("negara", $datanegara);            $data = $this->kategoriberitamodel->get_all_profesi();            $this->smarty->assign("kategori_berita", $data);            $this->smarty->assign("no",1);            // notification            $arr_notify = $this->notification->get_notification();            $this->smarty->assign("notification_msg", $arr_notify['message']);            $notification_status = (empty($arr_notify['message_status'])?'red':            'green');            $this->smarty->assign("notification_status", $notification_status);            // parse url            $this->smarty->assign('url_add', site_url('private/kategori_berita/add'));            $this->smarty->assign('url_list', site_url('private/kategori_berita/index'));            $this->smarty->assign('url_edit', site_url('private/kategori_berita/edit'));            $this->smarty->assign('url_delete', site_url('private/kategori_berita/hapus'));            $this->smarty->assign('url_process', site_url('private/kategori_berita/process/hapus'));            // display document            $this->parser->parse( 'private/base-layout/document.html');        }        public        function process($action) {            switch($action) {                case 'add':                    $this->process_add();                    break;                case 'edit':                    $this->process_edit();                    break;                case 'hapus':                    $this->process_hapus();                    break;                default :                    // default redirect                    redirect('private/kategori_berita/add');                    break;            }    }    public    function add() {        // template content        $this->smarty->assign("template_content", "private/kategori_berita/kategori_berita-add");        //load        $this->load->model('kategoriberitamodel');        $this->load->library('notification');        // url        $this->smarty->assign("url_add", site_url("private/kategori_berita/add"));        $this->smarty->assign("url_list", site_url("private/kategori_berita"));        $this->smarty->assign("url_process", site_url("private/kategori_berita/process/add"));        // --        $this->smarty->assign("active_add", 'class="tab-nav-active"');        // notification           $arr_notify = $this->notification->get_notification();                if(!empty($arr_notify['post'])) {            $this->smarty->assign("data", $arr_notify['post']);        }         $id_kategori = $this->kategoriberitamodel->get_max_kode_kategori_berita();        $this->smarty->assign('id_kategori',$id_kategori);        // notification        $this->smarty->assign("notification_msg", $arr_notify['message']);        $this->smarty->assign("notification_status", (empty($arr_notify['message_status'])?'red':        'green'));        // display document        $this->parser->parse( 'private/base-layout/document.html');    }    public    function process_add() {        // load library        $this->load->model('kategoriberitamodel');        $this->load->library('notification');        // set rules        $this->notification->check_post('kategori_berita', 'Nama kategori_berita', 'required');        $this->notification->check_post('urutan', 'Urutan', 'required');        $kategori_berita = $this->input->post('kategori_berita');        $urutan = $this->input->post('urutan');        // run                if ($this->notification->valid_input()) {                        if($this->kategoriberitamodel->is_exists_kategori_berita(strtolower($kategori_berita))) {                $this->notification->set_message('Nama kategori berita sudah ada');                $this->notification->clear_post();            }        }                if ($this->notification->valid_input()) {            // params            $params = array( $this->input->post('id_kategori'),                $this->input->post('kategori_berita'),                $this->input->post('urutan'));            // processing                        if($this->kategoriberitamodel->process_kategori_berita_add($params)) {                               $this->notification->clear_post();                $this->notification->set_message("Data berhasil disimpan");                $this->notification->sent_notification(true);            } else {                $this->notification->set_message("Data gagal disimpan");                $this->notification->sent_notification(false);            }        } else {            $this->notification->sent_notification(false);        }        // default redirect        redirect('private/kategori_berita/add');    }    public    function edit() {        // template content        $this->smarty->assign("template_content", "private/kategori_berita/kategori_berita-edit");        // load        $this->load->model('kategoriberitamodel');        $this->load->library('notification');        // url        $this->smarty->assign("url_add", site_url("private/kategori_berita/add"));        $this->smarty->assign("url_list", site_url("private/kategori_berita"));        $this->smarty->assign("url_process", site_url("private/kategori_berita/process/edit"));        // data        $id_kategori = $this->uri->segment(4);        $data = $this->kategoriberitamodel->get_kategori_berita_by_id($id_kategori);        $this->smarty->assign("data", $data);        // notification        $arr_notify = $this->notification->get_notification();                if(!empty($arr_notify['post'])) {            $this->smarty->assign("data", $arr_notify['post']);        }        // notification        $this->smarty->assign("notification_msg", $arr_notify['message']);        $this->smarty->assign("notification_status", (empty($arr_notify['message_status'])?'red':        'green'));        // display document        $this->parser->parse( 'private/base-layout/document.html');    }    public    function process_edit() {        // load library        $this->load->model('kategoriberitamodel');        $this->load->library('notification');         // set rules        $this->notification->check_post('kategori_berita', 'Nama kategori_berita', 'required');        $this->notification->check_post('urutan', 'Urutan', 'required');        $kategori_berita = $this->input->post('kategori_berita');        $urutan = $this->input->post('urutan');        // run                if ($this->notification->valid_input()) {                        if($this->kategoriberitamodel->is_exists_kategori_berita_edit(strtolower($kategori_berita)))  {                $this->notification->set_message('Nama kategori berita sudah ada');                $this->notification->clear_post();            }        }                if ($this->notification->valid_input()) {            // params            $params = array($this->input->post('kategori_berita'),                            $this->input->post('urutan'),                             $this->input->post('id_kategori'));            // processing                        if($this->kategoriberitamodel->process_kategori_berita_edit($params)) {                              $this->notification->clear_post();                $this->notification->set_message("Data berhasil disimpan");                $this->notification->sent_notification(true);            } else {                $this->notification->set_message("Data gagal disimpan");                $this->notification->sent_notification(false);            }        } else {            $this->notification->sent_notification(false);        }        // default redirect        redirect('private/kategori_berita/edit/'.$this->input->post('id_kategori'));    }    public    function hapus() {        // template content        $this->smarty->assign("template_content", "private/kategori_berita/kategori_berita-hapus");        // load        $this->load->model('kategoriberitamodel');        $this->load->library('notification');        // url        $this->smarty->assign("url_add", site_url("private/kategori_berita/add"));        $this->smarty->assign("url_list", site_url("private/kategori_berita"));        $this->smarty->assign("url_process", site_url("private/kategori_berita/process/hapus"));        // data        $id_kategori = $this->uri->segment(4);        $data = $this->kategoriberitamodel->get_kategori_berita_by_id($id_kategori);        $this->smarty->assign("data", $data);        // notification        $arr_notify = $this->notification->get_notification();                if(!empty($arr_notify['post'])) {            $this->smarty->assign("data", $arr_notify['post']);        }        // notification        $this->smarty->assign("notification_msg", $arr_notify['message']);        $this->smarty->assign("notification_status", (empty($arr_notify['message_status'])?'red':        'green'));        // display document        $this->parser->parse( 'private/base-layout/document.html');    }    public    function process_hapus() {        // load library        $this->load->library('notification');        $this->load->model('kategoriberitamodel');        // set rules        $this->notification->check_post('id_kategori', 'ID kategori_berita', 'required');        // run        $id = $this->input->post('id_kategori');                if ($this->notification->valid_input()) {            $data = $this->kategoriberitamodel->get_kategori_berita_by_id($id);                        if($this->kategoriberitamodel->process_kategori_berita_delete_one($id)) {                $this->notification->clear_post();                $this->notification->set_message(count($id).' Data berhasil dihapus');                $this->notification->sent_notification(true);            } else {                $this->notification->set_message("Data gagal dihapus");                $this->notification->sent_notification(false);            }        } else {            $this->notification->sent_notification(false);        }        // default redirect        redirect('private/kategori_berita');    }}